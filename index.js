"use strict";
var service_scraper_1 = require("service-scraper");
function domscrap(o, cb) {
    function attachall(url, prefix) {
        try {
            var tobescraped = new service_scraper_1.default(url);
            cb(false, tobescraped, false);
        }
        catch (err) {
            cb("can't scrape this url", false, err);
        }
    }
    if (o.url && o.prefix) {
        attachall(o.url, o.prefix);
    }
    else if (o.prefix) {
        var input_1 = document.getElementById(o.prefix + '_input');
        input_1.addEventListener('input', function () {
            if (input_1.value && input_1.value.length && input_1.value.length > 3) {
                console.log('input changed to: ', input_1.value);
                attachall(input_1.value, o.prefix);
            }
        });
    }
    else {
        throw Error("domscrap conf error");
    }
}
window.domscrap = domscrap;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxnQ0FBa0IsaUJBR2xCLENBQUMsQ0FIa0M7QUFZbkMsa0JBQWtCLENBQWlCLEVBQUUsRUFBTztJQUd4QyxtQkFBbUIsR0FBVyxFQUFFLE1BQWM7UUFDMUMsSUFBSSxDQUFDO1lBQ0QsSUFBTSxXQUFXLEdBQUcsSUFBSSx5QkFBSyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1lBRWxDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBQ2pDLENBQUU7UUFBQSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ1gsRUFBRSxDQUFDLHVCQUF1QixFQUFFLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQTtRQUMzQyxDQUFDO0lBQ0wsQ0FBQztJQUtELEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDcEIsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQzlCLENBQUM7SUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFFbEIsSUFBTSxPQUFLLEdBQVEsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQyxDQUFDO1FBQ2hFLE9BQUssQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUU7WUFDNUIsRUFBRSxDQUFDLENBQUMsT0FBSyxDQUFDLEtBQUssSUFBSSxPQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sSUFBSSxPQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUM5RCxPQUFPLENBQUMsR0FBRyxDQUFDLG9CQUFvQixFQUFFLE9BQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDL0MsU0FBUyxDQUFDLE9BQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFBO1lBQ3BDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUVQLENBQUM7SUFBQyxJQUFJLENBQUMsQ0FBQztRQUNKLE1BQU0sS0FBSyxDQUFDLHFCQUFxQixDQUFDLENBQUE7SUFDdEMsQ0FBQztBQU1MLENBQUM7QUFJSyxNQUFPLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzY3JhcCBmcm9tIFwic2VydmljZS1zY3JhcGVyXCJcblxuXG5pbnRlcmZhY2UgSUF0dGFjaE9wdGlvbnMge1xuICAgIHN0eWxlPzogc3RyaW5nO1xuICAgIGlucHV0Pzogc3RyaW5nO1xuICAgIHBhcmFtcz86IHt9O1xuICAgIHByZWZpeD86IHN0cmluZztcbiAgICB1cmw6IHN0cmluZztcbn1cblxuXG5mdW5jdGlvbiBkb21zY3JhcChvOiBJQXR0YWNoT3B0aW9ucywgY2I6IGFueSkge1xuXG5cbiAgICBmdW5jdGlvbiBhdHRhY2hhbGwodXJsOiBzdHJpbmcsIHByZWZpeDogc3RyaW5nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0b2Jlc2NyYXBlZCA9IG5ldyBzY3JhcCh1cmwpXG5cbiAgICAgICAgICAgIGNiKGZhbHNlLCB0b2Jlc2NyYXBlZCwgZmFsc2UpXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY2IoXCJjYW4ndCBzY3JhcGUgdGhpcyB1cmxcIiwgZmFsc2UsIGVycilcbiAgICAgICAgfVxuICAgIH1cblxuXG5cblxuICAgIGlmIChvLnVybCAmJiBvLnByZWZpeCkge1xuICAgICAgICBhdHRhY2hhbGwoby51cmwsIG8ucHJlZml4KVxuICAgIH0gZWxzZSBpZiAoby5wcmVmaXgpIHtcblxuICAgICAgICBjb25zdCBpbnB1dDogYW55ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoby5wcmVmaXggKyAnX2lucHV0Jyk7XG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGlucHV0LnZhbHVlICYmIGlucHV0LnZhbHVlLmxlbmd0aCAmJiBpbnB1dC52YWx1ZS5sZW5ndGggPiAzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2lucHV0IGNoYW5nZWQgdG86ICcsIGlucHV0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICBhdHRhY2hhbGwoaW5wdXQudmFsdWUsIG8ucHJlZml4KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IEVycm9yKFwiZG9tc2NyYXAgY29uZiBlcnJvclwiKVxuICAgIH1cblxuXG5cblxuXG59XG5cblxuXG4oPGFueT53aW5kb3cpLmRvbXNjcmFwID0gZG9tc2NyYXAiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
